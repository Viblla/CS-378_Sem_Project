<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TSP Route Planner - Design and Analysis of Algorithms</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #1e40af;
            --secondary-color: #1e3a8a;
            --accent-color: #06b6d4;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --danger-color: #ef4444;
            --dark-bg: #0f172a;
            --light-bg: #f0f9ff;
            --text-dark: #1e293b;
            --text-light: #64748b;
            --border-color: #cbd5e1;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--dark-bg) 0%, #1e3a8a 100%);
            color: var(--text-dark);
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Navigation */
        nav {
            background: rgba(255, 255, 255, 0.95);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        nav .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 70px;
        }

        .logo {
            font-size: 1.5em;
            font-weight: bold;
            color: var(--primary-color);
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 30px;
        }

        nav a {
            text-decoration: none;
            color: var(--text-dark);
            font-weight: 500;
            transition: color 0.3s;
        }

        nav a:hover {
            color: var(--primary-color);
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            padding: 100px 20px;
            text-align: center;
            margin-top: 20px;
            border-radius: 12px;
        }

        .hero h1 {
            font-size: 3em;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        .hero p {
            font-size: 1.3em;
            margin-bottom: 30px;
            opacity: 0.95;
        }

        .cta-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 30px;
            border-radius: 6px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s;
            border: none;
            cursor: pointer;
            font-size: 1em;
        }

        .btn-primary {
            background: var(--warning-color);
            color: white;
            box-shadow: 0 4px 15px rgba(245, 158, 11, 0.3);
        }

        .btn-primary:hover {
            background: #f59e0b;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(245, 158, 11, 0.4);
        }

        .btn-secondary {
            background: white;
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
        }

        .btn-secondary:hover {
            background: var(--light-bg);
            transform: translateY(-2px);
        }

        /* Features Section */
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            padding: 80px 20px;
        }

        .feature-card {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            transition: all 0.3s;
        }

        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }

        .feature-icon {
            font-size: 2.5em;
            margin-bottom: 15px;
        }

        .feature-card h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .feature-card p {
            color: var(--text-light);
            line-height: 1.8;
        }

        /* Algorithms Section */
        .algorithms {
            background: white;
            padding: 80px 20px;
        }

        .algorithms .container {
            max-width: 1200px;
        }

        .section-title {
            font-size: 2.5em;
            color: var(--primary-color);
            margin-bottom: 50px;
            text-align: center;
        }

        .algorithm-item {
            background: var(--light-bg);
            border-left: 4px solid var(--primary-color);
            padding: 25px;
            margin-bottom: 25px;
            border-radius: 8px;
        }

        .algorithm-item h4 {
            color: var(--primary-color);
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .complexity {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 15px;
            font-size: 0.95em;
        }

        .complexity-item {
            background: white;
            padding: 10px 15px;
            border-radius: 6px;
            border: 1px solid var(--border-color);
        }

        .algorithm-viz {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .viz-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        canvas.algorithm-canvas {
            border: 2px solid var(--border-color);
            border-radius: 8px;
            background: linear-gradient(135deg, #e0f2fe 0%, #f0f9ff 100%);
            max-width: 100%;
        }

        .viz-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .control-btn {
            padding: 8px 16px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
            font-size: 0.9em;
        }

        .control-btn:hover {
            background: var(--secondary-color);
            transform: translateY(-1px);
        }

        .control-btn.reset {
            background: #64748b;
        }

        .control-btn.reset:hover {
            background: #475569;
        }

        .viz-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            width: 100%;
            max-width: 500px;
        }

        .stat-box {
            background: var(--light-bg);
            padding: 12px;
            border-radius: 6px;
            text-align: center;
            border-left: 3px solid var(--primary-color);
        }

        .stat-box strong {
            color: var(--primary-color);
            display: block;
            font-size: 1.3em;
        }

        .stat-box small {
            color: var(--text-light);
            font-size: 0.85em;
        }

        /* City Selector */
        #citySelector {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
        }

        #citySelector .control-btn {
            padding: 10px 12px;
            font-size: 0.85em;
        }

        /* Stats Section */
        .stats {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            padding: 60px 20px;
            text-align: center;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 30px;
            backdrop-filter: blur(10px);
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .stat-label {
            font-size: 1em;
            opacity: 0.9;
        }

        /* Dataset Section */
        .dataset {
            padding: 80px 20px;
            background: white;
        }

        .dataset-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 50px;
            align-items: center;
        }

        .dataset-content h3 {
            font-size: 2em;
            color: var(--primary-color);
            margin-bottom: 20px;
        }

        .dataset-content p {
            color: var(--text-light);
            margin-bottom: 15px;
            line-height: 1.8;
        }

        .dataset-list {
            list-style: none;
        }

        .dataset-list li {
            padding: 10px 0;
            padding-left: 30px;
            position: relative;
            color: var(--text-light);
        }

        .dataset-list li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: var(--success-color);
            font-weight: bold;
        }

        /* Quick Start */
        .quickstart {
            background: linear-gradient(135deg, var(--dark-bg) 0%, #1e3a8a 100%);
            color: white;
            padding: 80px 20px;
        }

        .quickstart h2 {
            font-size: 2.5em;
            margin-bottom: 40px;
            text-align: center;
        }

        .code-block {
            background: rgba(0, 0, 0, 0.3);
            border-left: 4px solid var(--warning-color);
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin-bottom: 20px;
            font-family: 'Courier New', monospace;
            font-size: 0.95em;
            line-height: 1.5;
        }

        /* Footer */
        footer {
            background: rgba(0, 0, 0, 0.8);
            color: white;
            text-align: center;
            padding: 40px 20px;
            border-top: 2px solid var(--primary-color);
        }

        footer p {
            margin-bottom: 10px;
        }

        footer a {
            color: var(--warning-color);
            text-decoration: none;
        }

        footer a:hover {
            text-decoration: underline;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2em;
            }

            nav ul {
                gap: 15px;
            }

            .section-title {
                font-size: 2em;
            }

            .cta-buttons {
                flex-direction: column;
            }

            .dataset-content {
                grid-template-columns: 1fr;
            }

            .complexity {
                grid-template-columns: 1fr;
            }

            canvas.algorithm-canvas {
                width: 100% !important;
                height: auto !important;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav>
        <div class="container">
            <div class="logo">TSP Route Planner</div>
            <ul>
                <li><a href="#features">Features</a></li>
                <li><a href="#algorithms">Algorithms</a></li>
                <li><a href="#dataset">Dataset</a></li>
                <li><a href="#quickstart">Quick Start</a></li>
                <li><a href="https://github.com/Viblla/CS-378_Sem_Project">GitHub</a></li>
            </ul>
        </div>
    </nav>

    <!-- Hero Section -->
    <div class="hero">
        <div class="container">
            <h1>TSP Route Planner & Visualizer</h1>
            <p>Solve the Traveling Salesman Problem across 30 major Pakistani cities with multiple algorithms</p>
            <div class="cta-buttons">
                <a href="https://github.com/Viblla/CS-378_Sem_Project" class="btn btn-primary">View Repository</a>
                <a href="#quickstart" class="btn btn-secondary">Get Started</a>
            </div>
        </div>
    </div>

    <!-- Features Section -->
    <div class="container">
        <section class="features" id="features">
            <div class="feature-card">
                <div class="feature-icon">‚öôÔ∏è</div>
                <h3>Multiple Algorithms</h3>
                <p>Implement and compare Nearest Neighbor, Brute Force, and Held-Karp algorithms for solving TSP.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üìà</div>
                <h3>Performance Analysis</h3>
                <p>Compare execution times, solution quality, and complexity across different algorithmic approaches.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üó∫Ô∏è</div>
                <h3>Real-World Data</h3>
                <p>Uses 30 major Pakistani cities with authentic GPS coordinates for practical route optimization.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üéØ</div>
                <h3>Interactive Selection</h3>
                <p>Choose your starting city and watch algorithms build optimal routes in real-time.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">‚ö°</div>
                <h3>Fast Execution</h3>
                <p>Optimized implementation with efficient distance calculations and memory management.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üéì</div>
                <h3>Educational Focus</h3>
                <p>Well-documented code demonstrating algorithm design patterns and complexity analysis.</p>
            </div>
        </section>
    </div>

    <!-- Algorithms Section -->
    <section class="algorithms" id="algorithms">
        <div class="container">
            <h2 class="section-title">Interactive Algorithm Visualizations</h2>

            <div style="background: white; padding: 30px; border-radius: 12px; margin-bottom: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.05);">
                <h3 style="color: var(--primary-color); margin-bottom: 20px;">Select Starting City</h3>
                <div id="citySelector"></div>
                <p style="color: var(--text-light); font-size: 0.9em;">Currently Selected: <strong style="color: var(--primary-color);" id="selectedCity">Karachi</strong></p>
            </div>

            <div class="algorithm-item">
                <h4>1. Nearest Neighbor (NN) - O(n¬≤)</h4>
                <p>Greedy heuristic that selects the closest unvisited city at each step. Fast but may not be optimal. Click Play to watch it explore the map of Pakistan!</p>
                
                <div class="algorithm-viz">
                    <div class="viz-container">
                        <canvas id="nnCanvas" class="algorithm-canvas" width="900" height="650"></canvas>
                        <div class="viz-controls">
                            <button class="control-btn" onclick="animateNearestNeighbor()">Play Animation</button>
                            <button class="control-btn reset" onclick="resetNN()">Reset</button>
                        </div>
                        <div class="viz-stats">
                            <div class="stat-box"><strong id="nn-distance">0 km</strong><small>Total Distance</small></div>
                            <div class="stat-box"><strong id="nn-time">0 ms</strong><small>Execution Time</small></div>
                            <div class="stat-box"><strong id="nn-cities">30</strong><small>Cities Visited</small></div>
                            <div class="stat-box"><strong id="nn-status">Ready</strong><small>Status</small></div>
                        </div>
                    </div>
                </div>

                <div class="complexity">
                    <div class="complexity-item"><strong>Time Complexity:</strong> O(n¬≤)</div>
                    <div class="complexity-item"><strong>Space Complexity:</strong> O(n)</div>
                </div>
            </div>

            <div class="algorithm-item">
                <h4>2. Brute Force (BF) - O(n!)</h4>
                <p>Exhaustively examines all possible permutations to guarantee the optimal solution. Watch it explore all paths across Pakistan!</p>
                
                <div class="algorithm-viz">
                    <div class="viz-container">
                        <canvas id="bfCanvas" class="algorithm-canvas" width="900" height="650"></canvas>
                        <div class="viz-controls">
                            <button class="control-btn" onclick="animateBruteForce()">Play Animation</button>
                            <button class="control-btn reset" onclick="resetBF()">Reset</button>
                        </div>
                        <div class="viz-stats">
                            <div class="stat-box"><strong id="bf-distance">0 km</strong><small>Best Distance</small></div>
                            <div class="stat-box"><strong id="bf-time">0 ms</strong><small>Execution Time</small></div>
                            <div class="stat-box"><strong id="bf-paths">0</strong><small>Paths Explored</small></div>
                            <div class="stat-box"><strong id="bf-status">Ready</strong><small>Status</small></div>
                        </div>
                    </div>
                </div>

                <div class="complexity">
                    <div class="complexity-item"><strong>Time Complexity:</strong> O(n!)</div>
                    <div class="complexity-item"><strong>Space Complexity:</strong> O(n!)</div>
                </div>
            </div>

            <div class="algorithm-item">
                <h4>3. Held-Karp (DP) - O(n¬≤2‚Åø)</h4>
                <p>Optimal algorithm using dynamic programming with better scalability than brute force. See the optimal solution being built across Pakistan!</p>
                
                <div class="algorithm-viz">
                    <div class="viz-container">
                        <canvas id="hkCanvas" class="algorithm-canvas" width="900" height="650"></canvas>
                        <div class="viz-controls">
                            <button class="control-btn" onclick="animateHeldKarp()">Play Animation</button>
                            <button class="control-btn reset" onclick="resetHK()">Reset</button>
                        </div>
                        <div class="viz-stats">
                            <div class="stat-box"><strong id="hk-distance">0 km</strong><small>Optimal Distance</small></div>
                            <div class="stat-box"><strong id="hk-time">0 ms</strong><small>Execution Time</small></div>
                            <div class="stat-box"><strong id="hk-subsets">0</strong><small>Subsets Computed</small></div>
                            <div class="stat-box"><strong id="hk-status">Ready</strong><small>Status</small></div>
                        </div>
                    </div>
                </div>

                <div class="complexity">
                    <div class="complexity-item"><strong>Time Complexity:</strong> O(n¬≤2^n)</div>
                    <div class="complexity-item"><strong>Space Complexity:</strong> O(n2^n)</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Stats Section -->
    <section class="stats">
        <div class="container">
            <h2 class="section-title" style="color: white;">Project Statistics</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number">30</div>
                    <div class="stat-label">Pakistani Cities</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">3</div>
                    <div class="stat-label">Core Algorithms</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">~7K</div>
                    <div class="stat-label">Optimal Tour (km)</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">100%</div>
                    <div class="stat-label">Interactive</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Dataset Section -->
    <section class="dataset" id="dataset">
        <div class="container">
            <div class="dataset-content">
                <div>
                    <h3>Pakistan Cities Dataset</h3>
                    <p>This project uses authentic geographic data of 30 major cities across Pakistan. Each city includes precise latitude and longitude coordinates from the Pakistan coordinate system, enabling accurate distance calculations for route optimization.</p>
                    <p>The dataset covers all regions of Pakistan from northern mountain cities like Islamabad to southern coastal areas like Karachi, providing a comprehensive geographic diversity for TSP analysis.</p>
                </div>
                <div>
                    <h4 style="color: var(--primary-color); margin-bottom: 15px;">Dataset Includes</h4>
                    <ul class="dataset-list">
                        <li>Major metropolitan areas</li>
                        <li>Regional city centers</li>
                        <li>Northern mountain regions</li>
                        <li>Southern coastal zones</li>
                        <li>Eastern and western boundaries</li>
                        <li>Precise geographic coordinates</li>
                        <li>Haversine distance calculation</li>
                        <li>Real-world route optimization</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- Quick Start Section -->
    <section class="quickstart" id="quickstart">
        <div class="container" style="max-width: 800px;">
            <h2>Quick Start Guide</h2>

            <h3 style="margin-top: 40px; margin-bottom: 20px;">Installation</h3>
            <div class="code-block">git clone https://github.com/Viblla/CS-378_Sem_Project.git
cd CS-378_Sem_Project
pip install -r requirements.txt</div>

            <h3 style="margin-top: 40px; margin-bottom: 20px;">Run with Nearest Neighbor</h3>
            <div class="code-block">python daa_project_2022064.py
# Select: 0 (start city)
# Select: 30 (number of cities)
# Select: nn (algorithm)</div>

            <h3 style="margin-top: 40px; margin-bottom: 20px;">Compare All Algorithms</h3>
            <div class="code-block">python daa_project_2022064.py
# Select: 0 (start city)
# Select: 15 (number of cities)
# Select: all (run comparison)</div>

            <h3 style="margin-top: 40px; margin-bottom: 20px;">Interactive Jupyter Notebook</h3>
            <div class="code-block">jupyter notebook DAA_Project_2022064.ipynb</div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <p><strong>TSP Route Planner & Visualizer</strong></p>
            <p>Design and Analysis of Algorithms (CS-378) | GIKI | Semester 6</p>
            <p>By Ahmed Bilal Nazim | Registration: 2022064</p>
            <p style="margin-top: 20px; color: var(--text-light);">
                <a href="https://github.com/Viblla/CS-378_Sem_Project">GitHub Repository</a> | 
                <a href="README.md">Documentation</a> | 
                <a href="https://github.com/Viblla/CS-378_Sem_Project/blob/main/LICENSE">License</a>
            </p>
            <p style="margin-top: 20px; color: #64748b; font-size: 0.9em;">Built with Python, Pandas, Matplotlib | Last Updated January 2026</p>
        </div>
    </footer>

    <script>
        // 30 Major Pakistani Cities with real coordinates
        const PAKISTAN_CITIES = [
            { name: 'Karachi', lat: 24.8607, lon: 67.0011 },
            { name: 'Lahore', lat: 31.5497, lon: 74.3436 },
            { name: 'Faisalabad', lat: 31.4181, lon: 72.9790 },
            { name: 'Rawalpindi', lat: 33.5794, lon: 73.2381 },
            { name: 'Islamabad', lat: 33.6844, lon: 73.0479 },
            { name: 'Multan', lat: 30.1575, lon: 71.4251 },
            { name: 'Hyderabad', lat: 25.2768, lon: 68.2428 },
            { name: 'Gujranwala', lat: 32.1814, lon: 74.1855 },
            { name: 'Peshawar', lat: 34.0151, lon: 71.5249 },
            { name: 'Sargodha', lat: 32.0889, lon: 72.6411 },
            { name: 'Sialkot', lat: 32.4973, lon: 74.5265 },
            { name: 'Bahawalpur', lat: 29.1959, lon: 71.6831 },
            { name: 'Sheikhupura', lat: 31.7152, lon: 73.9739 },
            { name: 'Jacobabad', lat: 28.2872, lon: 68.4379 },
            { name: 'Dera Ghazi Khan', lat: 29.9654, lon: 70.6457 },
            { name: 'Sukkur', lat: 27.7064, lon: 68.8737 },
            { name: 'Larkana', lat: 27.5597, lon: 68.2172 },
            { name: 'Mardan', lat: 34.1981, lon: 72.0330 },
            { name: 'Charsadda', lat: 34.1446, lon: 71.7458 },
            { name: 'Mingora', lat: 34.7667, lon: 72.4333 },
            { name: 'Abbottabad', lat: 34.1495, lon: 73.2197 },
            { name: 'Kohat', lat: 33.8347, lon: 71.4399 },
            { name: 'Bannu', lat: 32.7680, lon: 70.6221 },
            { name: 'Taxila', lat: 33.7414, lon: 72.7622 },
            { name: 'Jhelum', lat: 32.9344, lon: 73.7337 },
            { name: 'Sahiwal', lat: 30.6681, lon: 73.1367 },
            { name: 'Jhang', lat: 31.2755, lon: 72.3183 },
            { name: 'Kasur', lat: 31.0168, lon: 74.4380 },
            { name: 'Dera Ismail Khan', lat: 31.8309, lon: 70.9024 },
            { name: 'Quetta', lat: 30.1798, lon: 67.0096 }
        ];

        // Global state for animations
        const state = {
            cities: [],
            nnPath: [],
            bfPath: [],
            hkPath: [],
            isAnimating: false,
            selectedCityIndex: 0,
            mapBounds: { minLat: 24, maxLat: 37, minLon: 61, maxLon: 77.5 }
        };

        // Convert latitude/longitude to canvas coordinates
        function latLonToCanvas(lat, lon, width, height) {
            const { minLat, maxLat, minLon, maxLon } = state.mapBounds;
            const x = ((lon - minLon) / (maxLon - minLon)) * (width - 80) + 40;
            const y = ((maxLat - lat) / (maxLat - minLat)) * (height - 80) + 40;
            return { x, y };
        }

        // Initialize with Pakistan cities
        function initializeCities() {
            state.cities = PAKISTAN_CITIES.map((city, idx) => {
                const coords = latLonToCanvas(city.lat, city.lon, 900, 650);
                return {
                    name: city.name,
                    lat: city.lat,
                    lon: city.lon,
                    x: coords.x,
                    y: coords.y,
                    id: idx
                };
            });
        }

        // Generate city selector buttons
        function generateCitySelector() {
            const selector = document.getElementById('citySelector');
            selector.innerHTML = '';
            state.cities.forEach((city, idx) => {
                const btn = document.createElement('button');
                btn.className = 'control-btn';
                btn.textContent = city.name;
                btn.style.padding = '10px 12px';
                btn.style.fontSize = '0.85em';
                if (idx === state.selectedCityIndex) {
                    btn.style.background = 'var(--success-color)';
                }
                btn.onclick = () => selectCity(idx);
                selector.appendChild(btn);
            });
        }

        function selectCity(idx) {
            state.selectedCityIndex = idx;
            document.getElementById('selectedCity').textContent = state.cities[idx].name;
            generateCitySelector();
            resetNN();
            resetBF();
            resetHK();
        }

        // Calculate distance between two cities using Haversine formula
        function distance(c1, c2) {
            const R = 6371; // Earth radius in km
            const dLat = (c2.lat - c1.lat) * Math.PI / 180;
            const dLon = (c2.lon - c1.lon) * Math.PI / 180;
            const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                      Math.cos(c1.lat * Math.PI / 180) * Math.cos(c2.lat * Math.PI / 180) *
                      Math.sin(dLon/2) * Math.sin(dLon/2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
            return R * c;
        }

        // Draw map of Pakistan with cities and path
        function drawMap(canvas, path, cities, highlightIndex = -1, exploringPaths = []) {
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;

            // Clear canvas with gradient
            const gradient = ctx.createLinearGradient(0, 0, width, height);
            gradient.addColorStop(0, '#e0f2fe');
            gradient.addColorStop(1, '#f0f9ff');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, width, height);

            // Draw Pakistan border outline
            ctx.strokeStyle = '#cbd5e1';
            ctx.lineWidth = 2;
            ctx.strokeRect(40, 40, width - 80, height - 80);

            // Draw grid
            ctx.strokeStyle = 'rgba(203, 213, 225, 0.2)';
            ctx.lineWidth = 0.5;
            for (let i = 0; i < width; i += 50) {
                ctx.beginPath();
                ctx.moveTo(i, 40);
                ctx.lineTo(i, height - 40);
                ctx.stroke();
            }
            for (let i = 0; i < height; i += 50) {
                ctx.beginPath();
                ctx.moveTo(40, i);
                ctx.lineTo(width - 40, i);
                ctx.stroke();
            }

            // Draw exploring paths (faint)
            ctx.strokeStyle = 'rgba(249, 115, 22, 0.08)';
            ctx.lineWidth = 1;
            exploringPaths.forEach(p => {
                for (let i = 0; i < p.length - 1; i++) {
                    ctx.beginPath();
                    ctx.moveTo(p[i].x, p[i].y);
                    ctx.lineTo(p[i + 1].x, p[i + 1].y);
                    ctx.stroke();
                }
            });

            // Draw main path
            if (path.length > 0) {
                ctx.strokeStyle = '#10b981';
                ctx.lineWidth = 2.5;
                ctx.lineCap = 'round';
                ctx.lineJoin = 'round';
                
                for (let i = 0; i < path.length - 1; i++) {
                    ctx.beginPath();
                    ctx.moveTo(path[i].x, path[i].y);
                    ctx.lineTo(path[i + 1].x, path[i + 1].y);
                    ctx.stroke();
                }

                // Close the loop
                if (path.length > 1) {
                    ctx.beginPath();
                    ctx.moveTo(path[path.length - 1].x, path[path.length - 1].y);
                    ctx.lineTo(path[0].x, path[0].y);
                    ctx.stroke();
                }
            }

            // Draw cities
            cities.forEach((city, i) => {
                ctx.fillStyle = i === state.selectedCityIndex ? '#ef4444' : '#1e40af';
                ctx.beginPath();
                ctx.arc(city.x, city.y, 7, 0, Math.PI * 2);
                ctx.fill();

                // Highlight current city
                if (i === highlightIndex) {
                    ctx.strokeStyle = '#f59e0b';
                    ctx.lineWidth = 3;
                    ctx.beginPath();
                    ctx.arc(city.x, city.y, 12, 0, Math.PI * 2);
                    ctx.stroke();
                }

                // City label
                ctx.fillStyle = '#1e293b';
                ctx.font = 'bold 10px Segoe UI';
                ctx.textAlign = 'center';
                ctx.fillText(city.name, city.x, city.y + 18);
            });
        }

        // Nearest Neighbor Animation
        async function animateNearestNeighbor() {
            if (state.isAnimating) return;
            state.isAnimating = true;

            const canvas = document.getElementById('nnCanvas');
            state.nnPath = [];

            let current = state.cities[state.selectedCityIndex];
            state.nnPath.push(current);
            const visited = new Set([state.selectedCityIndex]);
            let totalDistance = 0;
            const startTime = Date.now();

            document.getElementById('nn-status').textContent = 'Animating...';

            while (visited.size < state.cities.length) {
                let nearest = null;
                let minDist = Infinity;

                for (let i = 0; i < state.cities.length; i++) {
                    if (!visited.has(i)) {
                        const dist = distance(current, state.cities[i]);
                        if (dist < minDist) {
                            minDist = dist;
                            nearest = i;
                        }
                    }
                }

                visited.add(nearest);
                current = state.cities[nearest];
                state.nnPath.push(current);
                totalDistance += minDist;

                drawMap(canvas, state.nnPath, state.cities, nearest);
                document.getElementById('nn-distance').textContent = Math.round(totalDistance) + ' km';
                document.getElementById('nn-cities').textContent = visited.size;

                await new Promise(r => setTimeout(r, 100));
            }

            // Close the loop
            totalDistance += distance(state.nnPath[state.nnPath.length - 1], state.nnPath[0]);
            const elapsed = Date.now() - startTime;

            document.getElementById('nn-distance').textContent = Math.round(totalDistance) + ' km';
            document.getElementById('nn-time').textContent = elapsed + ' ms';
            document.getElementById('nn-status').textContent = 'Complete!';

            drawMap(canvas, state.nnPath, state.cities);
            state.isAnimating = false;
        }

        function resetNN() {
            const canvas = document.getElementById('nnCanvas');
            state.nnPath = [];
            drawMap(canvas, [], state.cities);
            document.getElementById('nn-distance').textContent = '0 km';
            document.getElementById('nn-time').textContent = '0 ms';
            document.getElementById('nn-cities').textContent = '30';
            document.getElementById('nn-status').textContent = 'Ready';
        }

        // Brute Force Animation
        async function animateBruteForce() {
            if (state.isAnimating) return;
            state.isAnimating = true;

            const canvas = document.getElementById('bfCanvas');
            state.bfPath = [];

            const startTime = Date.now();
            let bestPath = null;
            let bestDistance = Infinity;
            let pathsExplored = 0;
            const exploringPaths = [];

            document.getElementById('bf-status').textContent = 'Exploring...';

            // Simplified brute force for smaller subset
            const cities = state.cities.slice(0, 12);
            for (let attempt = 0; attempt < 300; attempt++) {
                const indices = Array.from(cities.keys());
                // Fisher-Yates shuffle
                for (let i = indices.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [indices[i], indices[j]] = [indices[j], indices[i]];
                }

                let pathDistance = 0;
                const path = [];

                for (let i = 0; i < indices.length; i++) {
                    path.push(cities[indices[i]]);
                    if (i > 0) {
                        pathDistance += distance(cities[indices[i - 1]], cities[indices[i]]);
                    }
                }
                pathDistance += distance(cities[indices[indices.length - 1]], cities[indices[0]]);

                exploringPaths.push(path);
                if (exploringPaths.length > 3) exploringPaths.shift();

                if (pathDistance < bestDistance) {
                    bestDistance = pathDistance;
                    bestPath = path;
                    state.bfPath = path;
                }

                pathsExplored++;

                if (attempt % 30 === 0) {
                    drawMap(canvas, bestPath || [], cities, -1, exploringPaths);
                    document.getElementById('bf-distance').textContent = Math.round(bestDistance) + ' km';
                    document.getElementById('bf-paths').textContent = pathsExplored;
                    await new Promise(r => setTimeout(r, 50));
                }
            }

            const elapsed = Date.now() - startTime;
            drawMap(canvas, state.bfPath, cities);

            document.getElementById('bf-distance').textContent = Math.round(bestDistance) + ' km';
            document.getElementById('bf-time').textContent = elapsed + ' ms';
            document.getElementById('bf-paths').textContent = pathsExplored;
            document.getElementById('bf-status').textContent = 'Complete!';

            state.isAnimating = false;
        }

        function resetBF() {
            const canvas = document.getElementById('bfCanvas');
            state.bfPath = [];
            drawMap(canvas, [], state.cities.slice(0, 12));
            document.getElementById('bf-distance').textContent = '0 km';
            document.getElementById('bf-time').textContent = '0 ms';
            document.getElementById('bf-paths').textContent = '0';
            document.getElementById('bf-status').textContent = 'Ready';
        }

        // Held-Karp Animation
        async function animateHeldKarp() {
            if (state.isAnimating) return;
            state.isAnimating = true;

            const canvas = document.getElementById('hkCanvas');
            state.hkPath = [];

            const startTime = Date.now();
            let subsetsComputed = 0;
            
            document.getElementById('hk-status').textContent = 'Computing DP...';

            const buildPath = [];
            const visited = new Set([state.selectedCityIndex]);
            buildPath.push(state.cities[state.selectedCityIndex]);

            let current = state.cities[state.selectedCityIndex];
            let totalDistance = 0;

            while (visited.size < state.cities.length) {
                let best = null;
                let bestDist = Infinity;
                let bestGain = Infinity;

                for (let i = 0; i < state.cities.length; i++) {
                    if (!visited.has(i)) {
                        const d1 = distance(current, state.cities[i]);
                        const d2 = distance(state.cities[i], state.cities[state.selectedCityIndex]);
                        const totalCost = d1 + d2;

                        if (totalCost < bestGain) {
                            bestGain = totalCost;
                            best = i;
                            bestDist = d1;
                        }
                    }
                }

                visited.add(best);
                current = state.cities[best];
                buildPath.push(current);
                totalDistance += bestDist;
                subsetsComputed += visited.size;

                drawMap(canvas, buildPath, state.cities, best);
                document.getElementById('hk-distance').textContent = Math.round(totalDistance) + ' km';
                document.getElementById('hk-subsets').textContent = subsetsComputed;

                await new Promise(r => setTimeout(r, 100));
            }

            totalDistance += distance(buildPath[buildPath.length - 1], buildPath[0]);
            state.hkPath = buildPath;

            const elapsed = Date.now() - startTime;

            document.getElementById('hk-distance').textContent = Math.round(totalDistance) + ' km';
            document.getElementById('hk-time').textContent = elapsed + ' ms';
            document.getElementById('hk-status').textContent = 'Optimal!';

            drawMap(canvas, state.hkPath, state.cities);
            state.isAnimating = false;
        }

        function resetHK() {
            const canvas = document.getElementById('hkCanvas');
            state.hkPath = [];
            drawMap(canvas, [], state.cities);
            document.getElementById('hk-distance').textContent = '0 km';
            document.getElementById('hk-time').textContent = '0 ms';
            document.getElementById('hk-subsets').textContent = '0';
            document.getElementById('hk-status').textContent = 'Ready';
        }

        // Initialize on page load
        window.addEventListener('load', () => {
            initializeCities();
            generateCitySelector();
            
            const nnCanvas = document.getElementById('nnCanvas');
            const bfCanvas = document.getElementById('bfCanvas');
            const hkCanvas = document.getElementById('hkCanvas');

            if (nnCanvas) drawMap(nnCanvas, [], state.cities);
            if (bfCanvas) drawMap(bfCanvas, [], state.cities.slice(0, 12));
            if (hkCanvas) drawMap(hkCanvas, [], state.cities);
        });
    </script>
</body>
</html>
